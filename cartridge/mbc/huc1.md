# [HuC1](https://gbdev.io/pandocs/HuC1.html)

HuC1は、ゲームボーイのゲームソフトで使われているMBCで、通常のMBCの機能に加えて赤外線通信もできるのが特徴です。

インターネット上では、HuC1がMBC1に似ているとよく書かれていますが、実際のところはあまり似ていません。

HuC1を使っている有名なゲームとしては、日本版の[ポケモンカードGB](https://www.nintendo.co.jp/titles/50010000020074)があります。

## メモリマップ

アドレス | 機能
--------------|------------------------------------
\$0000-1FFF  | RAM/IRモード選択 (W)
\$2000-3FFF  | ROMバンク番号 (W)
\$4000-5FFF  | RAMバンク番号 (W)
\$6000-7FFF  | 不使用?
\$A000-BFFF  | RAMバンク/IRレジスタ

### 0000-1FFF RAM/IRモード選択 (W)

ほとんどのMBCでは、誤った書き込みを防ぐため、カートリッジRAMを無効にすることができます。

HuC1ではこれを行わず、このレジスタを使用してアドレス空間`$A000-BFFF`を RAMモード と IRモード （後述）の間で切り換えます。

`0x0E`を書き込むとIRモードに、それ以外を書き込むとRAMモードに切り替わります。

ただし、HuC1のゲームの中には、この領域に`0x0A`や`0x00`を書き込んで、あたかもカートRAMの有効/無効を切り替えようとするものがあります。

### 2000-3FFF ROMバンク番号 (W)

HuC1では6~8bitのバンク番号を受け付けることができます。(HuC1なら最低でも6bit分、つまり64バンクはある模様？)

### 4000-5FFF RAMバンク番号 (W)

HuC1では2~8bitのバンク番号を受け付けることができます。(HuC1なら最低でも2bit分、つまり4バンクはある模様？)

### 6000-7FFF 不使用? (W)

この領域への書き込みは意味がないようです。それでも、ゲームによっては、MBC1と同じ効果があるかのように、この領域に書き込むものがあります。このような書き込みは無視していただいて結構です。

### A000-BFFF RAMバンク or IRレジスタ (R/W)

IRモードの時は、IRレジスタはここにマッピングされます。この領域に書き込むことで、IRトランスミッターを制御することができます。`0x01`でオン、`0x00`でオフとなります。この領域から読み出すと、`0xC1`（赤外線を受信した）または`0xC0`（受信しなかった）のどちらかが返ってきます。

RAMモードの時は、この領域は[通常のカートリッジの外部RAM](mbc1.md#a000-bfff---ramバンク-00-03-rw)と同じように動作します。

## 参考記事

- [Source on jrra.zone](http://jrra.zone/blog/huc1.html)
